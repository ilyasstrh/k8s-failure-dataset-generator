# Kubernetes Failure Dataset Generator

## Overview
The `k8s-failure-dataset-generator` is a Python script designed to collect and process Kubernetes (K8s) pod metrics to generate datasets. It utilizes Kubernetes API and Prometheus for real-time data collection while using Chaos Mesh for simulating various operational scenarios.

## Features
- Collects real-time metrics from Kubernetes pods.
- Generates datasets useful for anomaly detection and maintenance.

## Prerequisites
- Python 3.x
- Kubernetes cluster.
- Prometheus.
- Access to Kubernetes API.

## Installation
Clone the repository to your local machine:

```sh
git clone https://github.com/ilyasstrh/k8s-failure-dataset-generator.git
cd k8s-failure-dataset-generator
```


## Configuration
Edit the `dataset_generator.py` file to update the following settings as per your environment:
- `prometheus_url`: URL of your Prometheus instance.
- `namespace`: Kubernetes namespace to monitor.
- `output_file`: the exported CSV filename.
- `exclude_pod_names`: List of pod names to exclude from monitoring.
- `sleep_interval`: Interval (in seconds) between data fetches.

## Usage
Run the script using Python:

```sh
python3 dataset_generator.py
```

The script will start collecting data from the specified Kubernetes environment and save it to a CSV file at the configured intervals.

# Dataset Column Descriptions

Below is a description of each column in the generated dataset:

| Column Name        | Description                                                                                                                                                            |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Timestamp           | Records the exact date and time when other metrics were captured.                                                                                                       |
| Pod Name            | Unique identifier for each pod, enabling per-pod metrics tracking.                                                                                                      |
| CPU Usage (%)       | Percentage of the allocated CPU resources being used by the pod at the time of recording.                                                                               |
| Memory Usage (%)    | Percentage of the allocated memory resources being used by the pod.                                                                                                     |
| Network Traffic (B/s) | Rate at which the pod is transmitting data over the network.                                                                                                           |
| Network Receive (B/s) | Rate at which the pod is receiving data over the network.                                                                                                              |
| Network Transmit (B/s) | Rate at which the pod is transmitting data over the network.                                                                                                           |
| Network Receive Errors | Number of errors encountered while the pod is receiving network traffic.                                                                                                |
| Network Transmit Errors | Number of errors encountered while the pod is transmitting network traffic.                                                                                            |
| Last Log Entry       | Most recent log message generated by the pod, useful for diagnostics.                                                                                                   |
| Pod Status           | Current status of the pod (e.g., Running, Pending, Failed, etc.).                                                                                                       |
| Pod Reason           | Reason for the pod's current status, including events like NodeAffinity, Evicted, etc.                                                                                  |
| Pod Restarts         | Number of times the pod has restarted, indicating instability or issues.                                                                                                |
| Ready Containers     | Count of containers in the pod that are ready to serve requests.                                                                                                        |
| Total Containers     | Total number of containers currently part of the pod.                                                                                                                   |
| Error Message        | Any error messages reported by the pod, crucial for understanding failures.                                                                                             |
| Latest Event Reason  | Reason for the most recent event affecting the pod, such as scaling events or scheduled maintenance.                                                                    |
| Pod Event Type       | Categorizes the event affecting the pod, such as Warning or Normal.                                                                                                     |
| Pod Event Age        | How long ago the last event affecting the pod occurred.                                                                                                                 |
| Pod Event Source     | Origin of the last event, which can be the Kubernetes master or a specific node.                                                                                        |
| Pod Event Message    | A descriptive message about the last event, offering insight into what happened and why.                                                                                |
| Node Name            | The name of the node on which the pod is running, important for identifying node-related patterns or issues.                                                            |
| Event Reason         | General descriptor for events occurring within the cluster that may impact the pod.                                                                                     |
| Event Age            | Indicates the age of a particular event related to the pod or node.                                                                                                     |
| Event Source         | Identifies the source of the event, which can help in pinpointing the origins of issues.                                                                                |
| Event Message        | Provides details about the event, essential for understanding the implications on the pod's operation.                                                                  |


## Contributing
Contributions to `k8s-failure-dataset-generator` are welcome! Please follow the standard GitHub flow: fork the repo, make changes, and submit a pull request.

## License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgements
- OpenTelemetry for the demo application.

## Contact
Please, contact me for any queries or contributions.
